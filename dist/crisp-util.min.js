/*! OpenCrisp UtilJS - v0.2.0 - 2015-12-27
* https://github.com/OpenCrisp/Crisp.UtilJS
* Copyright (c) 2015 Fabian Schmid; Licensed MIT */
!function(a){function b(a,b,c){var d=c.args;void 0===d&&(d=c),d=[].concat(d),a.apply(b,d),"function"==typeof c.complete&&c.complete.apply(b,d)}function c(a){var b=e.call(a).replace(f,"$1");return-1!==["global","Null","DOMWindow"].indexOf(b)&&(b="Undefined"),b}function d(a,b){return"field"===b?d(a,"String")||d(a,"Number")||d(a,"Boolean")||d(a,"Date")||d(a,"RegExp"):c(a)===b}var e=Object.prototype.toString,f=/^\[object ([a-z]+)\]$/i;a.Crisp={ns:function(a,b){var c,d=a.split("."),e=this;c=d.length-1;for(var f=0,g=c;g>f;f+=1)e[d[f]]=e[d[f]]||{},e=e[d[f]];if(b){if(!this.isType(e[d[c]],"Undefined"))throw new Error("Can't overwrite '"+a+"' of defined!");e[d[c]]=b}else"undefined"==typeof e[d[c]]&&(e[d[c]]={});return e[d[c]]},utilTick:function(c,d,e,f){return e=e||{},c=c||e.self,e.async&&(f=!0,delete e.async),f?(a.Crisp.nextTick(b,d,c,e),c):(b(d,c,e),c)},toType:c,isType:d,to:function(){return JSON.stringify(this)},parse:function(){return JSON.parse(this.toString())},type:function(a){return a?d(this,a):c(this)},toMath:function(a){return Math[a].call(Math,this)},math:function(a){return Math[a].call(Math,this)},toJson:function(a){return a?JSON.stringify(this,null,"	"):JSON.stringify(this)},parseJson:function(){return JSON.parse(this.toString())}}}("undefined"!=typeof process&&"undefined"!=typeof process.title&&"undefined"!=typeof global?global:window),function(a){a.ns("util.control.Break",function(){}),a.ns("util.control.End",function(){})}(Crisp),function(a){function b(a,b,c,d,e){a.call(b,c,d),e.call(b,c)}function c(a,c){function d(c,d,g){var h;return c.async&&(h=c.async,delete c.async),d=d||c.success||e,g=g||c.complete||e,h?f(b,a,this,c,d,g):(a.call(this,c,d),g.call(this,c)),this}return Object.defineProperty(d,"tick",{value:c||!0}),Object.defineProperty(d,"callback",{value:a}),d}function d(a,b){var c,d={};if(Crisp.type.call(b[0],"Object"))return b[0];a=a||[];for(var e=0,f=b.length;f>e;e+=1)c=a[e]||e,d[c]=b[e];return d}var e=a.ns("util.control.Break"),f=function(){return"object"==typeof process&&"function"==typeof process.nextTick?process.nextTick:"function"==typeof setImmediate?setImmediate:function(a){return setTimeout.apply(null,[a,0].concat(Array.prototype.slice.call(arguments).slice(1)))}}();a.nextTick=f,a.utilTack=c,a.callSchema=d}(Crisp),function(a){function b(){for(var c,d=0,e=arguments.length;e>d;d+=1)c=arguments[d],a.isType(c,"Array")?b.apply(this,c):void 0!==c&&this.push(c);return this}function c(a,b,c){var f,g=0,h=1,i=this.length,j=a.start?Number(a.start):0,k=void 0===a.limit?i:Number(a.limit);for(0>=k&&(k=i),0>j&&(j=i+j),j+k>i&&(k-=j+k-i),0>j&&(j=0,k=i),a.reverse&&(h=-1,j-=i+h);k>g;g+=1)try{f=(g+j)*h,b.call(a.self,this[f],f,c)}catch(l){if(!(l instanceof d)){if(l instanceof e||0>f)return this;throw l}a.reverse&&a.limit&&(k+=1)}return this}var d=a.ns("util.control.Break"),e=a.ns("util.control.End"),f=a.utilTack;Object.defineProperty(Array.prototype,"xAdd",{value:b}),a.xEachArray=c,Object.defineProperty(Array.prototype,"xEach",{value:f(c)})}(Crisp),function(a){Number.isInteger=Number.isInteger||function(b){return a.isType(b,"Number")&&isFinite(b)&&Math.floor(b)===b},Object.defineProperty(Number.prototype,"toMath",{value:a.toMath}),Object.defineProperty(Number.prototype,"xMath",{value:a.math})}(Crisp),function(a){function b(a,b,e){var f,g,h=Object.keys(this),i=0,j=1,k=h.length,l=a.start?Number(a.start):0,m=void 0===a.limit?k:Number(a.limit);for(0>=m&&(m=k),0>l&&(l=k+l),l+m>k&&(m-=l+m-k),0>l&&(l=0,m=k),a.reverse&&(j=-1,l-=k+j);m>i;i+=1)try{f=(i+l)*j,g=h[f],b.call(a.self,this[g],g,e)}catch(n){if(!(n instanceof c)){if(n instanceof d||0>f)return this;throw n}a.reverse&&a.limit&&(m+=1)}return this}var c=a.ns("util.control.Break"),d=a.ns("util.control.End"),e=a.utilTack;a.xEachObject=b,Object.defineProperty(Object.prototype,"xEach",{value:e(b)}),Object.defineProperty(Object.prototype,"xTo",{value:a.to}),Object.defineProperty(Object.prototype,"xType",{value:a.type}),Object.defineProperty(Object.prototype,"toURLParam",{value:function(){var b=[];return this.xEach({success:function(c,d){var e="";e=a.isType(c,"Object")?c.xTo():a.isType(c,"Array")?c.xTo():a.isType(c,"Boolean")?c.xTo():c.toString(),e=d.concat("=",e),b.push(e)}}),b.join("&")}})}(Crisp),function(a){var b=/[.*+?^${}()|[\]\\]/g;RegExp.escape=RegExp.escape||function(a){return a.replace(b,"\\$&")},Object.defineProperty(RegExp.prototype,"xTo",{value:function(){return a.to.call(this.toString())}})}(Crisp),function(a){Object.defineProperty(String.prototype,"toMath",{value:a.toMath}),Object.defineProperty(String.prototype,"xMath",{value:a.math}),Object.defineProperty(String.prototype,"xParse",{value:a.parse})}(Crisp),function(a){function b(a){if(this.prototype[a]&&-1===v.indexOf(a))throw new Error("Redefined prototype "+a);if(this.hasOwnProperty(a))throw new Error("Can't overwride prototype."+a+" with property!")}function c(a,c){b.call(this,c),this.prototype[c]=a}function d(a){a.xEach({self:this,success:c})}function e(a){a.xEach({self:this,success:d})}function f(a,b){var c={};void 0!==b.proEnu&&(c.enumerable=b.proEnu),void 0!==b.proCon&&(c.configurable=b.proCon),void 0!==b.proWri&&(c.writable=b.proWri),void 0!==b.proVal?c.value=b.proVal:(void 0!==b.proGet||void 0!==b.proSet)&&(c.get=b.proGet,c.set=b.proSet),Object.defineProperty(this,a,c)}function g(a,b){f.call(this,b,a)}function h(a){a.xEach({self:this,success:g})}function i(a){a.xEach({self:this,success:h})}function j(a,b){f.call(this,m(b),a)}function k(a){a.xEach({self:this,success:j})}function l(a){a.xEach({self:this,success:k})}function m(a){return u.concat(a,u)}function n(a,b){if(!this.hasOwnProperty(a))throw new Error("set Option: Property '"+a+"' not defined!");return this[a]=b,this}function o(a,b){n.call(this,m(b),a)}function p(a){a.xEach({self:this,success:o})}function q(a){return[].xAdd(a).xEach({self:this,success:p}),this}function r(a,b){var c=this[a];return void 0===c&&(c="function"==typeof b.preset?b.preset.call(this):b.preset,b.insert&&n.call(this,a,c)),c}function s(a,b){var c=this.data[b];void 0!==c&&(this.obj[b]=c)}function t(b){var c=a.ns(b);this.op.xAdd(c.options),this.pp.xAdd(c.properties),this.pt.xAdd(c.prototypes)}var u="__",v=["toString","valueOf"],w={};a.utilProperty=f,a.ns("util.create").prototypes={objIni:function(a){var b=this._("create");return l.call(this,b.options),i.call(this,b.properties),q.call(this,a)},_:function(b){var c,d;return a.type.call(b,"String")?this[m(b)]:(d=m(b.name),c=r.call(this,d,b),b.after&&n.call(this,d,c+b.after),b.before&&n.call(this,d,c+=b.before),c)},objSet:function(a,b){return n.call(this,m(a),b)},objData:function(a){return(this.objNs("util.props")?this:a).xEach({self:{obj:this,data:a},success:s}),this},objClone:function(){function a(){}return a.prototype=this,new a},objNs:function(a){return-1!==this._("create").ns.indexOf(a)}},a.utilCreate=function(a){var b,c,d,g;return a=a||{},w[a.once]?w[a.once].objClone():(b=a.base||function(){},c={op:[],pp:[],pt:[]},d=["util.create"].xAdd(a.ns).xEach({self:c,success:t}),e.call(b,c.pt.xAdd(a.prototypes)),g=new b,f.call(g,m("create"),{proVal:{ns:d,options:c.op.xAdd(a.options),properties:c.pp.xAdd(a.properties)}}),a.once?(w[a.once]=g,g.objClone()):g)}}(Crisp),function(a){function b(){}function c(a){var b;if(void 0!==a)return w.call(a,"RegExp")?a:(b=a.split(" "),b.map(function(a){return v(a)}),new RegExp("(^|\\s)("+b.join("|")+")($|\\s|\\.)"))}function d(a){var b;if(void 0!==a)return w.call(a,"RegExp")?a:(b=a.split(" "),b.map(function(a){return v(a)}),new RegExp("^("+b.join("|")+")$"))}function e(){this._list={}}function f(a,b,c,d,f,g){this.self=a,this.action=c,this.path=f,this.repeat=!0,this.picker=b,this._treat=d,this._empty=g,this._wait=1,this._note=new e}function g(a){this._listen=a.listen,this._self=a.self,this._async=a.async,this._action=c(a.action),this._path=d(a.path),this._noteAction=c(a.noteAction),this._notePath=d(a.notePath),this._noteList=a.noteList||x}function h(){this._listener=[]}function i(a,b){return a.self=a.self||this,b.add(a)}function j(a,b,c){return a=a||{},a.self=a.self||this,b.trigger(a),a.repeat&&c&&w.call(c.eventTrigger,"Function")&&c.eventTrigger(a),this}function k(a){var b,c,d;return c=a.cache.picker=a.cache.picker||{},b=a.action||y,d=b.split(".")[0],c[d]instanceof f?c[d].Wait():(!a.path&&w.call(this.docPath,"Function")&&(a.path=this.docPath()),c[d]=new f(this,c,b,d,a.path,a.empty))}function l(a,b){return b.remove(a),this}function m(a){return a=a||{},a.event=a.event||z,a.parent=a.parent||A,a}function n(a,b){return b=m(b),Object.defineProperty(a,b.event,{writabel:!0,value:new h}),Object.defineProperties(a,{eventListener:{value:function(a){return i.call(this,a,this[b.event])}},eventTrigger:{value:function(a){return j.call(this,a,this[b.event],this[b.parent])}},eventPicker:{value:k},eventRemove:{value:function(a){return l.call(this,a,this[b.event])}}}),a}function o(a,b){return b=m(b),a.hasOwnProperty(b.event)&&a[b.event]instanceof h}function p(a,b,c,d,e){a.call(b,c,d,e),e.Talk()}function q(c,d){function e(d,e,f){var g,h={};return e=e||b,a.defineEvent(h),f&&h.eventListener({self:this,listen:f}),g=h.eventPicker({cache:{},empty:!0}),d.async?t(p,c,this,d,e,g):(c.call(this,d,e,g),g.Talk()),this}return Object.defineProperty(e,"tick",{value:d||!0}),Object.defineProperty(e,"callback",{value:c}),e}function r(a,b,c,d,e){function f(a){b.eventTrigger(a),g.Note(a),h.Note(a)}var g,h;g=b.eventPicker({cache:c,action:"task.doc."+e}),h=b.eventPicker({cache:c,action:"changed.doc."+e}),a.call(b,c,d,f),g.Talk(),h.Talk()}function s(a,c,d){function e(d,e){var f;return e=e||b,d.async&&(f=d.async,delete d.async),f?t(r,a,this,d,e,c):r(a,this,d,e,c),this}return Object.defineProperty(e,"task",{value:d||!0})}var t=a.nextTick,u=a.utilTick,v=RegExp.escape,w=a.type,x="own",y="task",z="__event__",A="__parent__";e.prototype={List:function(a){return a=a||x,this._list[a]=this._list[a]||[]},Length:function(a){var b,c=0;if(void 0!==a);else for(b in this._list)c+=this._list[b].length;return c},Empty:function(a){return 0===this.Length(a)},Add:function(a,b){this.List(a.type||b).push(a)}},f.prototype={Wait:function(){return this._wait+=1,this},Talk:function(){return this._wait-=1,this._wait>0||!this._empty&&this._note.Empty()?this:this.End()},End:function(){return this._wait=0,delete this.picker[this._treat],this.self.eventTrigger(this),this},Note:function(a,b){return this._note.Add(a,b),this},List:function(a){return this._note.List(a)},Test:function(a){var b=0;return this._note.List(a._noteList).forEach(function(c){var d=0;a._notePath&&!a._notePath.test(c.path)&&(d+=1),a._noteAction&&!a._noteAction.test(c.action)&&(d+=1),0===d&&(b+=1)}),0===b}},g.prototype={talk:function(a){this._self!==a.exporter&&(!this._action||this._action.test(a.action))&&(!this._path||this._path.test(a.path))&&(!this._notePath&&!this._noteAction||a instanceof f&&!a.Test(this))&&u(this._self,this._listen,a,this._async)},is:function(a){var b;return b=this._action&&a.action?this._action.toString()===c(a.action).toString():void 0===this._action||void 0===a.action,this._listen===a.listen&&b}},h.prototype={add:function(a){for(var b,c=this._listener,d=0,e=c.length;e>d;d+=1)if(c[d].is(a))return c[d];return b=new g(a),c.push(b),b},trigger:function(a){for(var b=this._listener,c=0,d=b.length;d>c;c+=1)b[c].talk(a);return this},remove:function(a){for(var b=this._listener,c=0,d=b.length;d>c;c+=1)if(b[c]===a){b.splice(c,1);break}return this}};var B={name:"event",preset:function(){return new h},insert:!0},C={name:"parent",preset:{}},D={proWri:!0};a.ns("util.event").options={event:D},a.ns("util.event").prototypes={eventListener:function(a){return i.call(this,a,this._(B))},eventTrigger:function(a){return j.call(this,a,this._(B),this._(C))},eventPicker:k,eventRemove:function(a){return l.call(this,a,this._(B))}},a.defineEvent=n,a.hasOwnEvent=o,a.utilPick=q,a.utilTask=s}(Crisp),function(a){function b(){}function c(a,b,c){var d=D.call(a.itemEach,"Function")?a.itemEach:a.xEach;c=c||function(a){w.call(this,a,null,b)},d.callback.call(a,{self:this,reverse:this._revlist},c)}function d(a,b){this.child.exec({node:a},b),(D.call(a,"Array")||D.call(a,"Object"))&&c.call(this,a,b,function(a){J["#"].call(this,a,b)})}function e(a){return D.call(a,"Function")}function f(c,d,e,f){var g=this;if(c){var h={};a.defineEvent(h),h.eventListener({action:"success",listen:function(a){e.call(g,a)}}),h.eventListener({action:"complete",listen:function(){f.call(g)}});try{c.exec({node:d},h)}catch(i){if(i instanceof b)return;if(i instanceof F)return;throw i}}}function g(a){var b,c,d,e,f=new i(this,a);for(e=d=f.add(1),L.lastIndex=this._index;!c&&(b=L.exec(this._path));)this._index=L.lastIndex,M+=1,void 0!==b[1]?(e._operator=b[1],e=e.value=f.add()):void 0!==b[2]?e._reverse=b[2].length:void 0!==b[3]?(d._next=b[3],e=d=f.add(1)):void 0!==b[4]?e.child=g.call(this,e):void 0!==b[5]?c=!0:void 0!==b[6]?e.child=new v(e,Number(b[6])):void 0!==b[7]?e.child=new v(e,"true"===b[7]):void 0!==b[8]?e.child=new v(e,b[8].replace(G,'"')):void 0!==b[9]?e.child=new v(e,b[9].replace(H,"'")):void 0!==b[10]?e.child=new v(e,new RegExp(b[10],b[11])):void 0!==b[12]?e.child=new v(e,this.valueKey(b[12])):(this._index=b.index,e.parse()),L.lastIndex=this._index;return f}function h(){}function i(a,b){b||(this._reason=a),this._parent=b,this.condition=[]}function j(a,b,c){var d=D.call(b,"Undefined")||"false"===b||b===!1||D.call(b,"Boolean")&&!b.valueOf();d?k.call(this,a,!0,c):D.call(b.isBoolean,"Function")?b.isBoolean.tick||k.call(this,a,b.isBoolean()&&!b.valueOf()||!b,c):k.call(this,a,!b,c)}function k(a,b,c){a>0?(a-=1,j.apply(this,arguments)):c.call(this,b)}function l(a,b,c,d){return a?void f.call(this,this.value,b,function(d){d instanceof RegExp&&(b=d.test(b),d=!0),b=I[a](b,d),c.call(this,b)},d):(c.call(this,b),void d.call(this))}function m(a){this._parent=a}function n(a){var b;Q.lastIndex=this._index;var c=Q.exec(this._path);if(c){if(this._index=Q.lastIndex,void 0!==c[1])b=new q(a).parse();else if(void 0!==c[3])b=new p(a,c[3]).parse(),b._revlist=c[2];else if(void 0!==c[4])b=new r(a,c[4]).parse();else if(void 0!==c[6])b=new s(a,c[6]).parse(),b._revlist=c[5];else if(void 0!==c[7])b=new r(a,this.valueKey(c[7])).parse(),b._valkey=c[7];else if(void 0!==c[8])b=t.call(this,a);else{if(void 0===c[9])return void(this._index=c.index);b=new o(a).parse()}return b}}function o(a){this._parent=a}function p(a,b){this._parent=a,S.test(b)?(b=S.exec(b),this._start=b[1],this._limit=b[2]):this._start=b}function q(a){this._parent=a}function r(a,b){Object.defineProperty(this,"_parent",{value:a}),this._attr=b}function s(a,b){this._parent=a,this._type=b}function t(a){var b,c;if(a instanceof u||(c=new u(a)),Z.lastIndex=this._index,b=Z.exec(this._path),!b)return c;if(this._index=Z.lastIndex,void 0!==b[1])c=new u(a);else{if(void 0===b[2])return this._index=b.index,c;c=new u(a,b[2]),b[3]&&b[3].length>0&&(c._args=JSON.parse("["+b[3].replace($,"$1")+"]"))}return c.parse()}function u(a,b){this._parent=a,this._name=b}function v(a,b){this._parent=a,this._value=b}function w(a,b,c){if(this.child)return void this.child.exec({node:a},c);var d=this.reason();if(!((d._count+=1)<=d._start)&&(c.eventTrigger({action:"success",args:[a]}),-1!==d._limit&&d._count>=d._limit))throw b=c.eventPicker({cache:c,action:"complete",empty:!0}),b.End(),new F}function x(a,b){var c=g.call(a);try{c.exec({node:this},b)}catch(d){if(d instanceof F)return;if(void 0!==a._preset)return void b.eventTrigger({action:"success",args:a._preset});throw d}}function y(a){this._path=a.path,this._values=a.values,this._preset=a.preset,this._limit=a.limit,this._start=a.start,this._async=a.async,this._count=0,this._index=0}function z(a){var b;return a=a||"",a.xType("String")&&(a={path:a}),a.limit=1,a.async=!1,a.success=function(a){b=a},this.pathFind(a),D.call(b,"Undefined")&&(b=D.call(a.preset,"Function")?a.preset.call(this):a.preset),b}function A(b,c,d){var f;b=b||{},c=c||b.success,d=d||b.complete,f=b.self||this,b.limit=b.limit||-1,b.start=b.start||0,b.values=b.values||{},b.values.self=b.values.self||this;var g=new y(b);g.level=0;var h={};return a.defineEvent(h),e(c)&&h.eventListener({action:"success",self:f,listen:c}),e(d)&&h.eventListener({action:"complete",self:f,listen:d}),C(this,x,[g,h],b.async),this}function B(a){return void 0!==this.pathNode({path:a})}var C=a.utilTick,D=a.type,E=a.ns("util.control.End"),F=function(){},G=/\\"/g,H=/\\'/g,I={">":function(a,b){return a>b},"<":function(a,b){return b>a},">=":function(a,b){return a>=b},"<=":function(a,b){return b>=a},"==":function(a,b){return a===b},"!=":function(a,b){return a!==b}},J={"*":c,"+":function(a,b){var c=b.eventPicker({cache:b,action:"complete",empty:!0});this.child&&(this._specific=this.child.filter),f.call(this,this.specific(),a,function(c){c&&this.child.exec({node:a},b)},function(){c.Talk()})},"#":function(a,b){var c=this.specific();c?f.call(this,c,a,function(c){c&&d.call(this,a,b)},E):d.call(this,a,b)}},K='\\s*(?:(\\!=|[<>=]{1,2})|(\\!+)|(&|\\|)|(\\[|\\()|(\\]|\\))\\.?|(-?\\d+(?:\\.\\d+)?)(?![\\.:~\\d])|(true|false)|"((?:[^"\\\\]*|\\\\"|\\\\)*)"|'+"'((?:[^'\\\\]*|\\\\'|\\\\)*)'|\\/((?:[^\\/\\\\]*|\\\\\\/|\\\\)+)\\/([igm]{1,3})?|\\$([\\w]+)\\s?(?![\\w\\.:])|.+)\\s*",L=new RegExp(K,"g"),M=0;h.prototype={parent:function(a){return a?this._parent&&e(this._parent[a])&&this._parent[a]():this._parent},reason:function(){return this._reason||this.parent("reason")},specific:function(){return this._specific||this.parent("specific")}};var N=i.prototype=new h;N.add=function(a){var b=new m(this);return a&&this.condition.push(b),b},N.exec=function(a,b){var c=b.eventPicker({cache:b,action:"complete",empty:!0});this.condition.xEach({self:this},function(d){return c.Wait(),d.next("&")?void f.call(this,d,a.node,function(a){if(!a)throw c.Talk(),new E},function(){c.Talk()}):d.next("|")?void f.call(this,d,a.node,function(a){if(a)throw w.call(this,a,c,b),c.Talk(),new E},function(){c.Talk()}):(d.exec({node:a.node},b),void c.Talk())},function(){c.Talk()})};var O=m.prototype=new h;O.parse=function(){return this.child=n.call(this.reason(),this),this},O.exec=function(a,b){var c=b.eventPicker({cache:b,action:"complete",empty:!0});return this.reverse()||this.operator()?void f.call(this,this.child,a.node,function(a){k.call(this,this.reverse(),a,function(a){c.Wait(),l.call(this,this.operator(),a,function(a){b.eventTrigger({action:"success",args:a})},function(){c.Talk()})})},function(){c.Talk()}):(w.call(this,a.node,c,b),void c.Talk())},O.reverse=function(){return this._reverse||0},O.operator=function(){return this._operator||0},O.next=function(a){return a?this._next===a:this._next};var P="\\s*(?:(\\.)|(\\^)?(-?\\d*~\\d*|-\\d+)\\.?|(\\d+|[a-z][a-z\\d\\-]*)\\.?|(\\^)?([*#+])\\.?|\\$([a-z\\d_]+)\\.?|(:)|(\\[|\\()|.+)\\s*",Q=new RegExp(P,"g"),R=o.prototype=new h;R.parse=function(){return this.filter=g.call(this.reason(),this),this.child=n.call(this.reason(),this),this},R.exec=function(a,b){var c=a.node,d=b.eventPicker({cache:b,action:"complete",empty:!0}),e=this;f.call(this,this.filter,c,function(a){a&&w.call(e,c,d,b)},function(){d.Talk()})};var S=/^(-?\d+)?~(\d+)?$/,T=p.prototype=new h;T.parse=function(){return this.child=n.call(this.reason(),this),this},T.exec=function(a,b){function c(a){var c=this.specific();c?f.call(this,c,a,function(c){c&&w.call(this,a,null,b)}):w.call(this,a,null,b)}var d,e=b.eventPicker({cache:b,action:"complete",empty:!0}),g={self:this,reverse:this._revlist};D.call(a.node.itemLimit,"Function")?(g.start=this._start,g.limit=this._limit,d=a.node.itemLimit):(g.start=this._start||0,g.limit=this._limit||10,d=a.node.xEach),d.callback.call(a.node,g,c),e.Talk()};var U=q.prototype=new h;U.parse=function(){return this.child=n.call(this.reason(),this),this},U.exec=function(a,b){w.call(this,a.node.__parent__,null,b)};var V=r.prototype=new h;V.parse=function(){return this.child=n.call(this.reason(),this),this},V.exec=function(a,b){var c=this,d=b.eventPicker({cache:b,action:"complete",empty:!0});return D.call(a.node[this.attr()],"Undefined")?this._valkey?(a.node=this.child.exec({node:this.attr()},b),void d.Talk()):D.call(a.node.pathInclude,"Function")?void a.node.pathInclude(this.attr(),function(a){w.call(c,a,d,b),d.Talk()}):void d.Talk():(w.call(this,a.node[this.attr()],d,b),void d.Talk())},V.attr=function(){return this._attr};var W=s.prototype=new h;W.parse=function(){return this.child=n.call(this.reason(),this),this},W.exec=function(a,b){J[this.type()].call(this,a.node,b)},W.type=function(){return this._type};var X="(?:[^)\\\\]*|\\\\\\)|\\\\)+",Y="(?:(\\.)|(\\w+)(?:\\(("+X+")\\))?\\.?)\\s*|.+",Z=new RegExp(Y,"g"),$=/\\([\(\)])/g,_=u.prototype=new h;_.parse=function(){return this.child=t.call(this.reason(),this),this},_.exec=function(b,c){function d(a){w.call(i,a,h,c)}function f(){h.Talk()}var g,h,i=this,j=b.node[this.name()];if(e(j)){if(h=c.eventPicker({cache:c,action:"complete",empty:!0}),!j.tick)return b.node=j.apply(b.node,this.args()),w.call(this,b.node,h,c),void h.Talk();g=a.callSchema(j.schema||j.tick,this.args()),j.call(b.node,g,d,f,h)}},_.name=function(){return this._name||"toString"},_.args=function(){return[].xAdd(this._args)};var aa=v.prototype=new h;aa.exec=function(a,b){var c=b.eventPicker({cache:b,action:"complete",empty:!0});w.call(this,this._value,c,b),c.Talk()},y.prototype={valueKey:function(a){return this._values[a]}},a.ns("util.path").prototypes={pathNode:z,pathFind:A,pathExists:B},a.definePath=function(a){Object.defineProperties(a,{pathNode:{value:z},pathFind:{value:A},pathExists:{value:B}})}}(Crisp);